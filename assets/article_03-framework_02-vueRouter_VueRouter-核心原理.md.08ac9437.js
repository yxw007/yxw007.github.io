import{_ as e,c as s,o as t,A as a}from"./app.d39a764e.js";const D=JSON.parse('{"title":"VueRouter 核心原理","description":"","frontmatter":{"title":"VueRouter 核心原理","author":"Potter","date":"2022-11-02 11:23","tags":["路由","VueRouter"],"categories":["VueRouter"]},"headers":[{"level":2,"title":"核心流程","slug":"核心流程","link":"#核心流程","children":[]},{"level":2,"title":"工作流程","slug":"工作流程","link":"#工作流程","children":[]}],"relativePath":"article/03-framework/02-vueRouter/VueRouter-核心原理.md","lastUpdated":1685439224000}'),l={name:"article/03-framework/02-vueRouter/VueRouter-核心原理.md"},o=a(`<h1 id="vuerouter-核心原理" tabindex="-1">VueRouter 核心原理 <a class="header-anchor" href="#vuerouter-核心原理" aria-hidden="true">#</a></h1><h2 id="核心流程" tabindex="-1">核心流程 <a class="header-anchor" href="#核心流程" aria-hidden="true">#</a></h2><p><img src="https://cdn.jsdelivr.net/gh/yxw007/BlogPicBed@master/img/20220417221815.jpg" alt="https://cdn.jsdelivr.net/gh/yxw007/BlogPicBed@master/img/20220417221815.jpg"></p><h2 id="工作流程" tabindex="-1">工作流程 <a class="header-anchor" href="#工作流程" aria-hidden="true">#</a></h2><ol><li>监听路由变化： <ol><li><strong>hash模式：通过window.addEventListener(hashchange) 监听hash值变化</strong></li><li><strong>history模式：window.addEventListener(&#39;popstate&#39;)来监听路径变化</strong></li></ol></li><li>路由数据转换收集 <ol><li>创建Matcher：循环递归构建path与匹配记录收集至pathMap</li></ol></li><li>渲染router-view：根据当前的$route 匹配组件渲染</li><li>路由跳转： <ol><li><p>利用router.match 匹配path 对应的记录</p></li><li><p>安装history监听函数</p></li><li><p>将响应式的app._route 重新赋值为新newRoute（此时触发set→render函数，从而导致页面刷新）</p><div class="language-jsx"><button title="Copy Code" class="copy"></button><span class="lang">jsx</span><pre class="shiki material-theme-palenight" tabindex="0"><code><span class="line"><span style="color:#676E95;font-style:italic;">//install.js</span></span>
<span class="line"><span style="color:#A6ACCD;">Vue</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">util</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">defineReactive</span><span style="color:#A6ACCD;">(</span><span style="color:#89DDFF;">this,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">_route</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">this.</span><span style="color:#A6ACCD;">_router</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">history</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">current)</span></span>
<span class="line"></span></code></pre></div></li></ol></li></ol>`,5),n=[o];function r(i,p,c,d,h,u){return t(),s("div",null,n)}const y=e(l,[["render",r]]);export{D as __pageData,y as default};
